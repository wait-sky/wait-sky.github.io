# 后端笔记

## Node.js 性能优化

### 代码优化

- 使用异步编程，避免阻塞事件循环
- 合理使用缓存，减少重复计算
- 优化数据库查询，使用索引
- 避免内存泄漏，及时清理资源

### 部署优化

- 使用 PM2 进行进程管理和负载均衡
- 启用 gzip 压缩
- 使用 CDN 加速静态资源
- 配置合理的超时时间

## 数据库优化

### MySQL 优化

- 合理设计表结构，避免冗余字段
- 使用合适的数据类型
- 创建必要的索引
- 优化查询语句，避免全表扫描

### MongoDB 优化

- 使用合适的索引
- 合理设计文档结构，避免嵌套过深
- 使用聚合管道优化查询
- 配置合适的分片策略

## API 设计最佳实践

### RESTful API 设计

- 使用合适的 HTTP 方法（GET, POST, PUT, DELETE）
- 使用语义化的 URL
- 提供合适的状态码
- 实现版本控制

### GraphQL API 设计

- 设计合理的 Schema
- 使用查询解析器优化查询
- 实现权限控制
- 提供合适的错误信息

## 安全最佳实践

### 认证与授权

- 使用 JWT 或 OAuth 2.0 进行认证
- 实现基于角色的访问控制
- 定期更换密钥

### 数据安全

- 对敏感数据进行加密
- 实现输入验证，防止 SQL 注入和 XSS 攻击
- 使用 HTTPS 保护数据传输

### 防止攻击

- 实现速率限制，防止 DDoS 攻击
- 使用 CORS 限制跨域请求
- 定期更新依赖包，修复安全漏洞
